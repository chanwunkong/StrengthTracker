<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>體態階段規劃器</title>
    <style>
        /* 全域基本樣式 */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: auto;
            background-color: #f5f5f5;
        }

        .strength-container {
            display: flex;
            align-items: stretch;
            gap: 20px;
            margin-bottom: 40px;
        }

        /* 左側控制區 */
        .left-panel {
            flex: 0 0 400px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }

        /* 右側圖表區 */
        .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* 區塊樣式 */
        .section {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            background-color: #f9f9f9;
        }

        /* 圖表容器 */
        .chart-container {
            width: 100%;
            max-width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #fff;
        }

        canvas {
            width: 100% !important;
            height: 400px !important;
        }

        button {
            min-width: 80px;
            height: 35px;
            padding: 5px 10px;
            font-size: 16px;
            cursor: pointer;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: #ddd;
        }

        @media (max-width: 768px) {
            .strength-container {
                flex-direction: column;
            }

            .left-panel,
            .right-panel {
                flex: 1;
            }
        }
    </style>
</head>

<body>

    <h2>體態階段規劃器</h2>

    <div class="strength-container">

        <!-- 左側控制區 -->
        <div class="left-panel">

            <!-- 初始條件 -->
            <div class="section">
                <h3>初始條件</h3>
                <label>初始體重 (kg): <input type="number" id="startWeight" value="80"></label><br><br>
                <label>初始體脂率 (%): <input type="number" id="startBodyFat" value="25"></label>
            </div>

            <!-- 階段管理 -->
            <div class="section">
                <h3>階段列表</h3>
                <div id="stageButtons"></div>
                <button onclick="addStage()">+ 新增階段</button>
            </div>

            <!-- 階段編輯區 -->
            <div class="section">
                <h3>階段編輯區</h3>
                <div id="stageForm">
                    <label>階段名稱: <input type="text" id="stageName"></label><br><br>

                    <label>訓練年資:
                        <select id="trainingLevel" onchange="recommendValues()">
                            <option value="">請選擇</option>
                            <option value="newbie">新手</option>
                            <option value="intermediate">中階</option>
                            <option value="advanced">進階</option>
                            <option value="expert">高階</option>
                        </select>
                    </label><br><br>

                    <label>目標類型:
                        <select id="goalType" onchange="recommendValues()">
                            <option value="bulking">增肌期</option>
                            <option value="cutting">減脂期</option>
                            <option value="maintenance">休息期</option>
                        </select>
                    </label><br><br>

                    <label>每週熱量盈餘/缺口 (kcal):
                        <input type="number" id="weeklyCalorieDelta" step="10"
                            oninput="updateCalorieOrWeight('calorie')">
                    </label><br><br>

                    <label>每週體重變化 (kg):
                        <input type="number" id="weeklyChange" step="0.01" oninput="updateCalorieOrWeight('weight')">
                    </label><br><br>

                    <label>肌肉變化比例 (%):
                        <input type="number" id="muscleRatio" step="1">
                    </label><br><br>

                    <label>條件邏輯:
                        <select id="conditionLogic">
                            <option value="OR">OR（任一達成）</option>
                            <option value="AND">AND（全部達成）</option>
                        </select>
                    </label><br><br>

                    <div id="conditionList"></div>
                    <button onclick="addCondition()">+ 新增條件</button><br><br>

                    <h4>休息期設定</h4>
                    <label>每幾週進入休息期: <input type="number" id="restInterval" value="12"></label><br><br>
                    <label>休息期持續週數: <input type="number" id="restDuration" value="2"></label><br><br>

                    <button onclick="saveStage()">儲存</button>
                    <button onclick="deleteStage()">刪除此階段</button>
                </div>
            </div>

            <!-- 計算按鈕 -->
            <button class="btn" onclick="calculate()">開始計算</button>
        </div>

        <!-- 右側圖表與結果區 -->
        <div class="right-panel">
            <div class="chart-container">
                <canvas id="combinedChart"></canvas>
            </div>
            <div id="results" class="section">
                <!-- 計算結果顯示區 -->
            </div>
        </div>

    </div>

</body>

</html>