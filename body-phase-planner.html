<h2>體態階段規劃器</h2>
<div class="left-panel">
    <h3>初始條件</h3>
    <label>初始體重 (kg): <input type="number" id="startWeight" value="80"></label><br>
    <label>初始體脂率 (%): <input type="number" id="startBodyFat" value="25"></label><br>

    <h3>階段列表</h3>
    <div id="stageButtons"></div>
    <button onclick="addStage()">+ 新增階段</button><br>

    <button class="btn" onclick="calculate()">開始計算</button>
</div>

<div class="form-area">
    <h3>階段編輯區</h3>
    <div id="stageForm" style="display:none;">
        <label>階段名稱: <input type="text" id="stageName"></label><br>

        <label>訓練年資:
            <select id="trainingLevel" onchange="recommendValues()">
                <option value="">請選擇</option>
                <option value="newbie">新手</option>
                <option value="intermediate">中階</option>
                <option value="advanced">進階</option>
                <option value="expert">高階</option>
            </select>
        </label><br>

        <label>目標類型:
            <select id="goalType" onchange="recommendValues()">
                <option value="bulking">增肌期</option>
                <option value="cutting">減脂期</option>
                <option value="maintenance">休息期</option>
            </select>
        </label><br>

        <label>每週熱量盈餘/缺口 (kcal):
            <input type="number" id="weeklyCalorieDelta" step="10" oninput="updateCalorieOrWeight('calorie')">
        </label><br>

        <label>每週體重變化 (kg):
            <input type="number" id="weeklyChange" step="0.01" oninput="updateCalorieOrWeight('weight')">
        </label><br>

        <label>肌肉變化比例 (%):
            <input type="number" id="muscleRatio" step="1">
        </label><br>

        <label>條件邏輯:
            <select id="conditionLogic">
                <option value="OR">OR（任一達成）</option>
                <option value="AND">AND（全部達成）</option>
            </select>
        </label><br>

        <div id="conditionList"></div>
        <button onclick="addCondition()">+ 新增條件</button><br>

        <h4>休息期設定（階段專屬）</h4>
        <label>每幾週進入休息期: <input type="number" id="restInterval" value="12"></label><br>
        <label>休息期持續週數: <input type="number" id="restDuration" value="2"></label><br>

        <button onclick="saveStage()">儲存</button>
        <button onclick="deleteStage()">刪除此階段</button>
    </div>

    <canvas id="combinedChart"></canvas>

    <div id="results"></div>
</div>
<div id="combinedChartContainer">
    <canvas id="combinedChart"></canvas>
</div>
<div id="results"></div>